(this.webpackJsonpitd_reports_website=this.webpackJsonpitd_reports_website||[]).push([[0],{126:function(e,t,a){},128:function(e,t,a){},166:function(e,t,a){e.exports=a(303)},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},177:function(e,t,a){},181:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),o=(a(171),a(172),a(173),a(174),a(342)),i=Object(o.a)((function(e){return{app:{flexGrow:1,backgroundColor:"#f8f8f8"}}})),u=a(52),s=a(12),m=a(6),d=(a(177),a(106)),f=a(359),b=a(345),E=a(346),p=a(356),g=a(306);function v(){return r.a.createElement("div",{className:"copyright"},r.a.createElement(g.a,{variant:"body2",color:"textSecondary"},"Copyright \xa9 ",r.a.createElement(u.b,{color:"inherit",to:"http://itdsoftware.com/"},"ITD Software")," ",(new Date).getFullYear(),"."))}var h=a(24),y=a.n(h),N=a(42),S=a(68),j=a.n(S);a(181);function O(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0];return{setLoading:t[1],Spinner:function(e){return r.a.createElement("div",{className:"Spinner"},e.children,a?r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"text"},r.a.createElement(j.a,null,"Loading..."))):null)}}}function C(e){var t=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],r=t[1],c=O(),l=c.Spinner,o=c.setLoading;function i(e,t,a){return u.apply(this,arguments)}function u(){return(u=Object(N.a)(y.a.mark((function e(t,a,n){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(!0),c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})},fetch("api/login",c).then((function(e){return e.json()})).then((function(e){r(e),o(!1),e[0]&&e[0].id&&(localStorage.setItem("id",e[0].id),n.history.push("/reports"))})).catch((function(e){console.log(e),setTimeout(1e3),i(t,a,n)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{Spinner:l,data:a,login:i}}(),a=t.login,c=t.data,l=t.Spinner;function o(){var t=Object(n.useState)(""),l=Object(m.a)(t,2),o=l[0],i=l[1],u=Object(n.useState)(""),s=Object(m.a)(u,2),d=s[0],f=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:a.bind(this,o,d,e)},r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return i(e.target.value)}})),r.a.createElement("form",{onSubmit:a.bind(this,o,d,e)},r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return f(e.target.value)}})),r.a.createElement(g.a,{className:"error"},c.toString()),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",className:"submit",onClick:a.bind(this,o,d,e)},"Submit"))}return r.a.createElement("div",{className:"Login"},r.a.createElement(l,null,r.a.createElement(d.a,{className:"papersurround"},r.a.createElement(f.a,{className:"avatar"},r.a.createElement("img",{className:"logo",src:"ITDlogo.jpg",alt:"logo"})),r.a.createElement(g.a,{className:"signin",component:"h1",variant:"h5"},"Sign in"),r.a.createElement(o,null),r.a.createElement("form",{className:"form",noValidate:!0},r.a.createElement(E.a,{container:!0},r.a.createElement(E.a,{item:!0,xs:!0}))),r.a.createElement(v,null))))}var k=a(149),x=a.n(k),D=(a(204),a(360)),w=a(148),B=a.n(w);function T(e,t){var a=r.a.useState(e[0]?e[0]:"empty"),c=Object(m.a)(a,2),l=c[0],o=c[1];function i(t){return r.a.createElement(r.a.Fragment,null,e.map((function(e,t){return r.a.createElement(D.a,{className:"item","aria-haspopup":!0,key:t,onMouseDown:function(){o(e)}},e)})))}return Object(n.useEffect)((function(){"empty"===l&&e[0]&&o(e[0])}),[e]),{selected:l,Select:function(e){var t=Object(n.useRef)(null);return r.a.createElement("div",{className:"Select",ref:t},r.a.createElement("div",{className:"head"},r.a.createElement("div",{className:"text"},r.a.createElement(g.a,null,l,r.a.createElement(B.a,null))),r.a.createElement("div",null,r.a.createElement(d.a,{className:"Items"},r.a.createElement(i,null)))))}}}function R(e,t){var a=Object(n.useState)([]),r=Object(m.a)(a,2),c=r[0],l=r[1],o=O(),i=o.Spinner,u=o.setLoading;function s(){return d.apply(this,arguments)}function d(){return(d=Object(N.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:u(!0);try{fetch("".concat(e),t).then((function(e){return e.json()})).then((function(e){l(null!=e?e:[])})).catch((function(e){console.log(e),console.log("Reattempting Connection..."),setTimeout((function(){}),1e3),s()}))}catch(n){l([]),console.error(n)}case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(n.useEffect)((function(){s()}),[e]),Object(n.useEffect)((function(){u(!1)}),[c]),{data:c,setData:l,fetchData:s,Spinner:i}}a(205);function P(){var e=function(){var e=R("api/databases").data,t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],c=a[1],l=T(r),o=l.Select,i=l.selected;return Object(n.useEffect)((function(){c(function(e){return e.map((function(e){return e.schema_name}))}(e))}),[e]),{Select:o,selected:i}}(),t=e.Select,a=e.selected,c=Object(n.useState)("itdepos"),l=Object(m.a)(c,2),o=l[0],i=l[1];return Object(n.useEffect)((function(){"empty"!==a&&i(a)}),[a]),{db:o,NavBar:function(){return r.a.createElement("div",{className:"NavBar"},r.a.createElement(x.a,{position:"fixed"},r.a.createElement("div",{className:"left"},r.a.createElement("img",{src:"ITDlogo.jpg",alt:"logo"}),r.a.createElement(j.a,{className:"text"},"Branch: "),r.a.createElement(t,null)),r.a.createElement("div",{className:"right"},r.a.createElement(u.b,{className:"link",to:"/"},r.a.createElement(j.a,null,"Logout")))))}}}var I=a(69),F=a(70),A=a(46),V=a(29);function z(e){return e&&e.length}function M(e,t){return z(e)?e.map((function(e){return e[t]})):[0]}function Q(e,t){return M(e,t).reduce((function(e,t){return e+t}))}function L(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r=JSON.parse(JSON.stringify(e));return z(r)?r.map((function(e){return a.map((function(t){return delete e[t]})),e})):[]}function _(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return z(e)?e.map((function(e){var t={};return a.map((function(a){return Object.assign(t,Object(A.a)({},a,e[a]))})),t})):[]}function W(e,t){for(var a=arguments.length,n=new Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];var c=J(e,t),l=c.map((function(a){return H(e,t,a)})),o=function(e,a){return Object.keys(e).forEach((function(r){e[r]="number"!==typeof e[r]||r===t||n.includes(r)?e[r]:e[r]+a[r]})),e},i=(l=JSON.parse(JSON.stringify(l))).map((function(e){return e.reduce(o)}));return i}function J(e,t){var a=[];if(z(e)){var n=new Set;e.forEach((function(e){return n.add(e[t])})),n.forEach((function(e){return a.push(e)}))}return a}function H(e,t,a){return e.filter((function(e){return e[t]===a}))}var q=a(48),Y=(a(206),a(150)),G=a.n(Y);function K(){var e=new Date;return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)}function $(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}function U(){var e=Object(n.useState)({start:K(),end:K()}),t=Object(m.a)(e,2),a=t[0],c=t[1];function l(e){return r.a.createElement("div",{className:"datefield"},r.a.createElement("input",{type:"date",required:!0,defaultValue:e.defaultValue,onChange:e.handleChange}),r.a.createElement(G.a,{className:"icon"}))}return{startDate:a.start,endDate:a.end,Dates:function(e){return r.a.createElement("div",{className:"Dates"},r.a.createElement(l,{handleChange:function(e){return c(Object(q.a)(Object(q.a)({},a),{},{start:$(e.currentTarget.value),end:a.end}))},defaultValue:a.start}),r.a.createElement("div",null,"-"),r.a.createElement(l,{handleChange:function(e){return c(Object(q.a)(Object(q.a)({},a),{},{start:a.start,end:$(e.currentTarget.value)}))},defaultValue:a.end}))}}}a(207);var X=a(347);function Z(e){return r.a.createElement("div",{className:"HeaderBar"},r.a.createElement(X.a,null,e.children))}a(126);var ee=a(351),te=a(352),ae=a(350),ne=a(349),re=a(151),ce=a.n(re);function le(e){return e&&e.length}function oe(e){return z(e.data)?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"emptyMessage"},r.a.createElement(g.a,null,"Empty"))}var ie=a(348),ue=a(361);function se(e){var t=e.order,a=e.orderBy,n=e.onRequestSort,c=r.a.useState([]),l=Object(m.a)(c,2),o=l[0],i=l[1],u=r.a.useState([]),s=Object(m.a)(u,2),d=s[0],f=s[1];return r.a.useEffect((function(){z(e.data)&&d!==e.data?(i(Object.keys(e.data[0]).map((function(t,a){return{id:a+1+"",numeric:"number"==typeof e.data[0][t],disablePadding:!1,label:t}}))),f(e.data)):i([])}),[e.data]),r.a.createElement(ie.a,null,r.a.createElement(ne.a,null,o.map((function(e){return r.a.createElement(ae.a,{key:e.id,align:"left",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t,onClick:(c=e.id,function(e){n(e,c)})},r.a.createElement(ue.a,{active:a===e.id,direction:a===e.id?t:"asc"},e.label));var c}))))}var me=Object(o.a)((function(e){return{head:{backgroundColor:"blue"}}}));function de(e){var t=me(),a=r.a.useState(!0),n=Object(m.a)(a,2),c=n[0],l=n[1],o=r.a.useState([]),i=Object(m.a)(o,2),u=i[0],s=i[1],d=r.a.useState("asc"),f=Object(m.a)(d,2),b=f[0],E=f[1],p=r.a.useState("calories"),g=Object(m.a)(p,2),v=g[0],h=g[1],y=r.a.useState(0),N=Object(m.a)(y,2),S=N[0],j=N[1],O=r.a.useState([]),C=Object(m.a)(O,2),k=C[0],x=C[1],D=r.a.useState(1),w=Object(m.a)(D,2),B=w[0],T=w[1];function R(){return c?r.a.createElement(ce.a,{onClick:function(){T(B+1)}}):r.a.createElement(r.a.Fragment,null)}return r.a.useEffect((function(){le(e.data)?(s(e.data),x(e.data.map((function(e){return Object.values(e).map((function(e,t){return"number"===typeof e&&(e=+Math.round(100*e)/100),r.a.createElement(ae.a,{key:t,align:"left"},e)}))}))),l(!0)):(s([]),x([]),j(0),T(1))}),[e.data]),r.a.useEffect((function(){j(100*B),S>e.data.length&&l(!1),e.bufferCallback&&B>1&&e.bufferCallback()}),[B]),r.a.createElement("div",{className:"Table"},r.a.createElement(ee.a,{stickyHeader:!0,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(se,{className:t.head,order:b,orderBy:v,onRequestSort:function(t,a){var n="asc"===b;if(E(n?"desc":"asc"),h(a),e.sortCallback)e.sortCallback({by:t.currentTarget.textContent,order:n?"desc":"asc"});else{var c=t.currentTarget.firstChild.firstChild.data,l=u.sort(function(e,t){var a="asc"===t?-1:1;return function(t,n){return t[e]>n[e]?a:t[e]<n[e]?-a:0}}(c,b));x(l.map((function(e){return Object.values(e).map((function(e,t){return"number"===typeof e&&e%1!==0&&(e=e.toFixed(2)),r.a.createElement(ae.a,{key:t,align:"left"},e)}))})))}},rowCount:k.length,data:u}),r.a.createElement(te.a,{className:"tableBody"},k.map((function(e,t){return r.a.createElement(ne.a,{key:t,hover:!0,role:"checkbox",tabIndex:-1},k[t])})))),r.a.createElement(R,null),r.a.createElement(oe,{data:e.data}))}function fe(){var e=Object(I.a)(["\ndisplay: flex;\nflex-direction: row;\njustify-content: space-between;\ntext-align: left;\nbackground-color:#004064;\ncolor: white;\n\n.MuiTypography-body1 {\n    font-size: 1em;\n    margin-left: 5px;\n    margin-right: 5px;\n}\n\n"]);return fe=function(){return e},e}function be(){var e=Object(I.a)(["\n.MuiTypography-root{\ntext-align: left;\nfont-weight: bold;\ncolor: #004064;\nfont-size: 1.25em; \nmargin: 5px;\n}\n"]);return be=function(){return e},e}function Ee(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],o=U(),i=o.startDate,u=o.endDate,s=o.Dates,f=R("/api/salesByProduct/".concat(e.db,"/").concat(i,"/").concat(u)),b=f.data,E=f.Spinner,p=T(J(b,"Cashier")),v=p.selected,h=p.Select;function y(e,t){return function(e,t){return J(e,t).map((function(a){return H(e,t,a)}))}(function(e,t,a){return e.sort(function(e,t){var a="asc"===t?-1:1;return function(t,n){return t[e]>n[e]?a:t[e]<n[e]?-a:0}}(t,a))}(H(_(e,"Receipt","Product","Sales","Qty","Refund","Discount","TillDate","TillTime","Cashier"),"Cashier",t),"Receipt","desc"),"Receipt")}function N(){var e="00-00-00";return r.a.createElement(r.a.Fragment,null,c.map((function(t,a){return r.a.createElement("div",{key:a},(n=t[0].TillDate)===e?r.a.createElement(r.a.Fragment,null):(e=n,r.a.createElement(pe,null,r.a.createElement(g.a,null,n))),r.a.createElement(ge,null,r.a.createElement(g.a,null,"Receipt "+t[0].Receipt),r.a.createElement(g.a,null,t[0].TillTime)),r.a.createElement(de,{data:_(t,"Product","Qty","Sales")}));var n})))}return Object(n.useEffect)((function(){l(y(b,v))}),[b,v]),r.a.createElement("div",{className:"report"},r.a.createElement(E,null,r.a.createElement(d.a,{className:"reportContainer"},r.a.createElement(Z,null,r.a.createElement(g.a,{className:"text",variant:"h6"},e.header),r.a.createElement(s,null)),r.a.createElement("div",{className:"reportBody",id:"cashierHistory"},r.a.createElement(h,null),r.a.createElement(N,null)))))}var pe=F.a.div(be()),ge=F.a.div(fe());function ve(e){var t=U(),a=t.startDate,n=t.endDate,c=t.Dates,l=R("/api/expiry/".concat(e.db,"/").concat(a,"/").concat(n)),o=l.data,i=l.Spinner;return r.a.createElement("div",{className:"report"},r.a.createElement(i,null,r.a.createElement(d.a,{className:"reportContainer"},r.a.createElement(Z,null,r.a.createElement(g.a,{className:"text",variant:"h6"},e.header),r.a.createElement(c,null)),r.a.createElement("div",{className:"reportBody"},r.a.createElement(de,{data:o})))))}function he(e){var t=U(),a=t.startDate,n=t.endDate,c=t.Dates,l=R("/api/priceoverride/".concat(e.db,"/").concat(a,"/").concat(n)),o=l.data,i=l.Spinner;return r.a.createElement("div",{className:"PriceOverride"},r.a.createElement(i,null,r.a.createElement(d.a,{className:"reportContainer"},r.a.createElement(Z,null,r.a.createElement(g.a,{className:"text",variant:"h6"},e.header),r.a.createElement(c,null)),r.a.createElement("div",{className:"reportBody"},r.a.createElement(de,{data:o})))))}function ye(e){var t=U(),a=t.startDate,n=t.endDate,c=t.Dates,l=R("/api/refund/".concat(e.db,"/").concat(a,"/").concat(n)),o=l.data,i=l.Spinner;return r.a.createElement("div",{className:"report"},r.a.createElement(i,null,r.a.createElement(d.a,{className:"reportContainer"},r.a.createElement(Z,null,r.a.createElement(g.a,{className:"text",variant:"h6"},e.header),r.a.createElement(c,null)),r.a.createElement("div",{className:"reportBody"},r.a.createElement(de,{data:o})))))}a(208);var Ne=a(354),Se=a(355),je=(a(128),a(59));function Oe(e){if(z(e.chartData.datasets)){var t=e.chartData.datasets[0].backgroundColor,a=e.chartData.labels,n=t.map((function(e,n){return r.a.createElement("div",{key:n++,className:"legendItem"},r.a.createElement("span",{key:n++,className:"dot",style:{backgroundColor:e}}),r.a.createElement("label",{key:n++,className:"label"},a[t.indexOf(e)]))}));return r.a.createElement("div",{className:"Legend"},r.a.createElement("ul",null,n),r.a.createElement("div",{className:"cover-bar"}))}return r.a.createElement("div",null)}function Ce(e,t){return window.innerWidth>1024?e:t}function ke(e){if("number"===typeof e)return e;var t=Object(V.a)(e).map((function(e){return e.charCodeAt(0)}));return parseInt(t.join(""),10)}function xe(e){var t=["rgba(0,0,0, 0.6)","rgba(128,128,128, 0.6)","rgba(128,128,0, 0.6)","rgba(128,0,128, 0.6)","rgba(128,0,0, 0.6)","rgba(0,128,128, 0.6)","rgba(0,128,0, 0.6)","rgba(0,0,128, 0.6)","rgba(255,255,255, 0.6)","rgba(255,255,0, 0.6)","rgba(255,0,255, 0.6)","rgba(255,0,0, 0.6)","rgba(0,255,255, 0.6)","rgba(0,255,0, 0.6)","rgba(0,0,255, 0.6)","rgba(255,255,128, 0.6)","rgba(255,128,255, 0.6)","rgba(255,128,128, 0.6)","rgba(128,255,255, 0.6)","rgba(128,255,128, 0.6)","rgba(128,128,255, 0.6)","rgba(128,0,255, 0.6)","rgba(0,128,255, 0.6)","rgba(255,128,0, 0.6)","rgba(64,64,64, 0.6)","rgba(192,192,192, 0.6)","rgba(192,192,64, 0.6)","rgba(192,64,192, 0.6)","rgba(192,64,64, 0.6)","rgba(64,192,192, 0.6)","rgba(64,192,64, 0.6)","rgba(64,64,192, 0.6)","rgba(255,255,64, 0.6)","rgba(255,64,255, 0.6)","rgba(255,64,64, 0.6)","rgba(64,255,255, 0.6)","rgba(64,255,64, 0.6)","rgba(64,64,255, 0.6)","rgba(255,255,192, 0.6)","rgba(255,192,255, 0.6)","rgba(255,192,192, 0.6)","rgba(192,255,255, 0.6)","rgba(192,255,192, 0.6)","rgba(192,192,255, 0.6)","rgba(192,64,255, 0.6)","rgba(64,192,255, 0.6)","rgba(255,192,64, 0.6)","rgba(64,64,0, 0.6)","rgba(64,0,64, 0.6)","rgba(64,0,0, 0.6)","rgba(0,64,64, 0.6)","rgba(0,64,0, 0.6)","rgba(0,0,64, 0.6)","rgba(192,192,0, 0.6)","rgba(192,0,192, 0.6)","rgba(192,0,0, 0.6)","rgba(0,192,192, 0.6)","rgba(0,192,0, 0.6)","rgba(0,0,192, 0.6)","rgba(64,0,192, 0.6)","rgba(0,64,192, 0.6)","rgba(192,64,0, 0.6)","rgba(102,51,0, 0.6)","rgba(255,229,204, 0.6)","rgba(255,153,153, 0.6)"];return e.map((function(e){return t[t.length-e%t.length-1]}))}function De(e){var t=W(e.data,e.groupBy),a=M(t,e.values),n=M(t,e.groupBy),c=z(e.data)?n.map((function(e){return ke(e)})):[],l=function(e,t,a){return{labels:t,datasets:[{label:"Net Sales \xa3",data:e,backgroundColor:xe(a)}]}}(a,n,c),o=a.reduce((function(e,t){return e+t})),i=Ce(12,12);return z(l.datasets)?r.a.createElement("div",{className:"PieChart"},r.a.createElement("div",{className:"chart"},r.a.createElement(je.b,{height:1,width:1,data:l,options:{layout:{},labels:{display:!1},legend:{display:!1,position:"top",align:"center",labels:{usePointStyle:!0,fontSize:24},fullWidth:!0},tooltips:{bodyFontSize:i,mode:"index",callbacks:{label:function(e,t){var a=t.labels[e.index];return a},afterLabel:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index],n=t.datasets[e.datasetIndex].data[e.index]/o*100;return n=n.toFixed(2),Number.isInteger(a)?a+" ("+n+"%)":"\xa3 "+a.toFixed(2)+" ("+n+"%)"}},fontSize:24}}})),r.a.createElement(Oe,{chartData:l})):r.a.createElement("div",{className:"chart"},r.a.createElement(je.b,{data:l}))}function we(e){var t=0,a=e.chartData.datasets.map((function(e){return e.backgroundColor})),n=e.chartData.datasets.map((function(e){return e.label})),c=a.map((function(e){return r.a.createElement("div",{key:t++,className:"legendItem"},r.a.createElement("span",{key:t++,className:"dot",style:{backgroundColor:e}}),r.a.createElement("label",{key:t++,className:"label"},n[a.indexOf(e)]))}));return r.a.createElement("div",{className:"Legend"},r.a.createElement("ul",null,c),r.a.createElement("div",{className:"cover-bar"}))}function Be(e){var t=e.data,a=e.x,n=e.groupBy,c=e.values,l=function(e,t,a,n){var r=J(e,a),c=xe(r.map((function(e){return ke(e)}))),l=r.map((function(l,o){var i=c[o],u=t.map((function(t){var c=H(e,"TillHour",t),l=H(c,a,r[o]),i=M(l,n);return z(l)?i.reduce((function(e,t){return e+t})):0}));return{label:r[r.indexOf(l)],data:u,backgroundColor:i,datasetKeyProvider:o}}));return{labels:t,datasets:l}}(t,a,n,c),o=Q(t,c),i=Ce(12,12);return void 0!==l.datasets?r.a.createElement("div",{className:"BarChart"},r.a.createElement("div",{className:"chart"},r.a.createElement(je.a,{data:l,options:{scales:{xAxes:[{stacked:!0,ticks:{fontSize:i}}],yAxes:[{stacked:!0,ticks:{fontSize:i}}]},labels:{display:!1,fontSize:24},legend:{display:!1,position:"right",align:"center",labels:{usePointStyle:!0},fullWidth:!0},tooltips:{bodyFontSize:Ce(12,12),mode:"single",callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex],n=a.label;return a.data[e.index]>0?n:""},afterLabel:function(e,t){var a=t.datasets[e.datasetIndex],n=a.data[e.index],r=(a.data[e.index]/o*100).toFixed(2);return a.data[e.index]>0?Number.isInteger(n)?n+" ("+r+"%)":"\xa3 "+n.toFixed(2)+" ("+r+"%)":""}}}}})),r.a.createElement(we,{chartData:l})):r.a.createElement("div",{className:"chart"},r.a.createElement(je.a,{data:l}))}a(300);var Te=a(344),Re=a(353),Pe=a(357),Ie=a(358);function Fe(e){return r.a.createElement("div",{className:"RadioButtons"},r.a.createElement(Te.a,{component:"fieldset"},r.a.createElement(Ie.a,{color:"#004064","aria-label":"gender",name:"gender1",value:e.value,onChange:e.handleChange},r.a.createElement(Re.a,{color:"#004064",value:"Sales",control:r.a.createElement(Pe.a,null),label:"Sales"}),r.a.createElement(Re.a,{color:"#004064",value:"Profit",control:r.a.createElement(Pe.a,null),label:"Profit"}),r.a.createElement(Re.a,{color:"#004064",value:"Qty",control:r.a.createElement(Pe.a,null),label:"Quantity"}))))}function Ae(e){var t=U(),a=t.startDate,c=t.endDate,l=t.Dates,o=T(["Category","Product","PriceMark","Cashier","Receipt"]),i=o.Select,u=o.selected,s=R("/api/salesByProduct/".concat(e.db,"/").concat(a,"/").concat(c)),f=s.data,b=s.Spinner,E=Object(n.useState)("Category"),p=Object(m.a)(E,2),v=p[0],h=p[1],y=Object(n.useState)(0),N=Object(m.a)(y,2),S=N[0],j=N[1],O=Object(n.useState)("Sales"),C=Object(m.a)(O,2),k=C[0],x=C[1],D=Object(n.useState)([]),w=Object(m.a)(D,2),B=w[0],P=w[1],I=Object(n.useState)("pie"),F=Object(m.a)(I,2),A=F[0],V=F[1],z=function(e){var t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("a"),o=Object(m.a)(l,2),i=o[0],u=o[1];function s(){"a"===i?(u("b"),a.callBack()):(u("a"),c.callBack())}return{IconSwitch:function(){return r.a.createElement("button",{className:"IconSwitch",onClick:s},"a"===i?a.icon:c.icon)}}}([{icon:r.a.createElement(Ne.a,null),callBack:V.bind(this,"bar")},{icon:r.a.createElement(Se.a,null),callBack:V.bind(this,"pie")}]).IconSwitch;function M(){return r.a.createElement("div",{className:"sales"},r.a.createElement(i,null),r.a.createElement(Fe,{handleChange:function(e){return x(e.target.value)},value:k}),r.a.createElement("h1",null,"Total: ","Qty"===k?S:"\xa3"+S.toFixed(2)))}function L(e){var t=Array.from(Array(24).keys()).map((function(e){return("0"+e+":00").slice(-5)}));return"pie"===e.chart?r.a.createElement(De,{data:f,groupBy:v,values:k}):r.a.createElement(Be,{data:f,x:t,groupBy:v,values:k})}return Object(n.useEffect)((function(){P(function(e,t){var a=W(e,t,"Id","CashierNum");switch(t){case"PriceMark":return _(a,"PriceMark","Sales","Cost","Discount","Refund","Profit","Qty");case"Cashier":return _(a,"Cashier","Sales","Cost","Discount","Refund","Profit","Qty");case"Product":return _(a,"Product","Id","Category","PriceMark","Sales","Cost","Discount","Refund","Profit","Qty");case"Category":return _(a,"Category","Sales","Cost","Discount","Refund","Profit","Qty");case"Receipt":return _(a,"Receipt","Cashier","TillDate","TillTime","Sales","Cost","Discount","DsctReason","Refund","Profit","Qty");default:return _(a,"Sales","Cost","Discount","Refund","Profit","Qty")}}(f,v)),j(Q(f,k))}),[v,k,f]),Object(n.useEffect)((function(){h(u)}),[u]),r.a.createElement("div",{className:"salesBreakdown"},r.a.createElement(b,null,r.a.createElement(d.a,{className:"reportContainer"},r.a.createElement(Z,null,r.a.createElement("div",{className:"left"},r.a.createElement(g.a,{className:"text",variant:"h6"}," ",e.header),r.a.createElement(l,null)),r.a.createElement("div",{className:"right"},r.a.createElement(z,null))),r.a.createElement("div",{className:"reportBody"},r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null),r.a.createElement(L,{chart:A})),r.a.createElement(de,{data:B})))))}function Ve(e){var t=U(),a=t.startDate,n=t.endDate,c=t.Dates,l=R("/api/staffhours/".concat(e.db,"/").concat(a,"/").concat(n)),o=l.data,i=l.Spinner;return r.a.createElement("div",{className:"report"},r.a.createElement(i,null,r.a.createElement(d.a,{className:"reportContainer"},r.a.createElement(Z,null,r.a.createElement(g.a,{className:"text",variant:"h6"},e.header),r.a.createElement(c,null)),r.a.createElement("div",{className:"reportBody"},r.a.createElement(de,{data:o})))))}function ze(e,t){var a=Object(n.useState)([]),r=Object(m.a)(a,2),c=r[0],l=r[1],o=Object(n.useState)(0),i=Object(m.a)(o,2),u=i[0],s=i[1],d=O(),f=d.Spinner,b=d.setLoading;function E(){return p.apply(this,arguments)}function p(){return(p=Object(N.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:b(!0),s(0),fetch("".concat(e,"/").concat(t,"/").concat(u)).then((function(e){return e.json()})).then((function(e){return l(e)})).catch((function(e){console.error(e),setTimeout(1e3),E()}));case 3:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=Object(N.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:b(!0),fetch("".concat(e,"/").concat(t,"/").concat(u)).then((function(e){return e.json()})).then((function(e){return l([].concat(Object(V.a)(c),Object(V.a)(e)))})).catch((function(e){console.log(e),setTimeout(1e3),g()}));case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(n.useEffect)((function(){g()}),[u]),Object(n.useEffect)((function(){E()}),[e]),Object(n.useEffect)((function(){b(!1)}),[c]),{data:c,getNextBuffer:function(){s(u+1)},Spinner:f}}function Me(){var e=Object(n.useState)({by:"id",order:"desc"}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(We).db,o=ze("api/nonscan/".concat(l,"/").concat(a.by,"/").concat(a.order),100),i=o.data,u=o.getNextBuffer,s=o.Spinner;return r.a.createElement(s,null,r.a.createElement(de,{data:i,bufferCallback:u,sortCallback:c}))}function Qe(){var e=Object(n.useState)({by:"id",order:"desc"}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(We).db,o=ze("api/reorder/".concat(l,"/").concat(a.by,"/").concat(a.order),100),i=o.data,u=o.getNextBuffer,s=o.Spinner;return r.a.createElement(s,null,r.a.createElement(de,{data:i,bufferCallback:u,sortCallback:c}))}function Le(){var e=Object(n.useState)({by:"id ",order:"desc"}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(We).db,o=ze("api/stock/".concat(l,"/").concat(a.by,"/").concat(a.order),100),i=o.data,u=o.getNextBuffer,s=o.Spinner;return r.a.createElement(s,null,r.a.createElement(de,{data:i,bufferCallback:u,sortCallback:c}))}function _e(){var e=Object(n.useState)({by:"id",order:"desc"}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(We).db,o=U(),i=o.startDate,u=o.endDate,s=o.Dates,d=ze("api/adjust/".concat(l,"/").concat(i,"/").concat(u,"/").concat(a.by,"/").concat(a.order),100),f=d.data,b=d.getNextBuffer,E=d.Spinner;return r.a.createElement(E,null,r.a.createElement(s,null),r.a.createElement(de,{data:f,bufferCallback:b,sortCallback:c}))}var We=r.a.createContext({db:"itdepos"});function Je(e){var t=T(["Stock","Reorder","Non Scan","Stock Adjust"]),a=t.selected,n=t.Select;function c(e){switch(a){case"Stock":return r.a.createElement(Le,null);case"Reorder":return r.a.createElement(Qe,null);case"Non Scan":return r.a.createElement(Me,null);case"Stock Adjust":return r.a.createElement(_e,null);default:return r.a.createElement(Le,null)}}return r.a.createElement("div",{className:"StockReport"},r.a.createElement(d.a,{className:"reportContainer"},r.a.createElement(Z,null,r.a.createElement(n,null)),r.a.createElement("div",{className:"reportBody"},r.a.createElement(We.Provider,{value:{db:e.db}},r.a.createElement(c,{selected:a,db:e.db})))))}var He=a(156);a(301);function qe(){var e=Object(I.a)(["\n\ncolor: #004064;;\ntext-align:left;\nmargin-left: 1em;\nfont-size: 1em;\n\n"]);return qe=function(){return e},e}function Ye(e){var t=U(),a=t.startDate,n=t.endDate,c=t.Dates,l=(Object(He.a)(t,["startDate","endDate","Dates"]),R("/api/VAT/".concat(e.db,"/").concat(a,"/").concat(n))),o=l.data,i=l.Spinner,u=_(o,"VatRate","Receipt_No","Total_Sales","Quantity","Total_VAT","Nett"),s=W(L(u,"Receipt_No"),"VatRate"),m=W(L(u,"VatRate"),"Receipt_No");return r.a.createElement("div",{className:"report"},r.a.createElement(i,null,r.a.createElement(d.a,{className:"reportContainer"},r.a.createElement(Z,null,r.a.createElement(g.a,{className:"text",variant:"h6"},e.header),r.a.createElement(c,null)),r.a.createElement("div",{className:"reportBody"},r.a.createElement(Ge,null,"Total VAT"),r.a.createElement("div",{className:"total"}," ",r.a.createElement(de,{data:s})),r.a.createElement(Ge,null,"VAT Receipts"),r.a.createElement(de,{data:m})))))}var Ge=F.a.h1(qe());function Ke(e){var t=U(),a=t.startDate,n=t.endDate,c=t.Dates,l=R("/api/wastage/".concat(e.db,"/").concat(a,"/").concat(n)),o=l.data,i=l.Spinner;return r.a.createElement("div",{className:"report"},r.a.createElement(i,null,r.a.createElement(d.a,{className:"reportContainer"},r.a.createElement(Z,null,r.a.createElement(g.a,{className:"text",variant:"h6"},e.header),r.a.createElement(c,null)),r.a.createElement("div",{className:"reportBody"},r.a.createElement(de,{data:o})))))}a(302);function $e(e){var t=P(),a=t.db,n=t.NavBar;return r.a.createElement("div",{className:"reportspage"},r.a.createElement(n,null),r.a.createElement("div",{className:"reports"},r.a.createElement(Ae,{header:"Sales Breakdown",db:a}),r.a.createElement(Je,{id:"stock",header:"Stock",db:a}),r.a.createElement(Ee,{header:"Cashier History",db:a}),r.a.createElement(Ye,{header:"VAT",db:a}),r.a.createElement(he,{header:"Price Override Report",db:a}),r.a.createElement(Ke,{header:"Wastage",db:a}),r.a.createElement(ye,{header:"Refund Report",db:a}),r.a.createElement(Ve,{header:"Staff Hours",db:a}),r.a.createElement(ve,{header:"Expiry Dates",db:a})))}var Ue=function(){var e=i();return document.body.style.zoom="1.0",r.a.createElement("div",{className:e.app},r.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),r.a.createElement("meta",{name:"viewport",content:"width=600, initial-scale=1 maximum-scale=1"}),r.a.createElement(u.a,null,r.a.createElement(s.a,{path:"/reports",exact:!0,render:function(e){if(localStorage.id)return r.a.createElement($e,e);e.history.replace("/")}}),r.a.createElement(s.a,{path:"/",exact:!0,render:function(e){return r.a.createElement(C,e)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[166,1,2]]]);
//# sourceMappingURL=main.91ac7a71.chunk.js.map